<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculators</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="prism.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa&display=swap');
    </style>

<body>
    <div class="titles">
        <h1 class="title">Calculators</h1>
        <h2>My first project in JS</h2>
    </div>
    <main>
        <!-- Normal Calculator -->
        <div class="normal_calculator">
            <h1>Normal Calculator</h1>
            <!-- Result -->
            <div class="calculator_result"></div>
            <!-- Result -->
            <div class="calculator_buttons" onselectstart="return false">
                <div class="button_calculator_div"><button class="button_calculator">AC</button></div>
                <div class="button_calculator_div"><button class="button_calculator">^</button></div>
                <div class="button_calculator_div"><button class="button_calculator">%</button></div>
                <div class="button_calculator_div"><button class="button_calculator">/</button></div>
                <div class="button_calculator_div"><button class="button_calculator">7</button></div>
                <div class="button_calculator_div"><button class="button_calculator">8</button></div>
                <div class="button_calculator_div"><button class="button_calculator">9</button></div>
                <div class="button_calculator_div"><button class="button_calculator">*</button></div>
                <div class="button_calculator_div"><button class="button_calculator">4</button></div>
                <div class="button_calculator_div"><button class="button_calculator">5</button></div>
                <div class="button_calculator_div"><button class="button_calculator">6</button></div>
                <div class="button_calculator_div"><button class="button_calculator">-</button></div>
                <div class="button_calculator_div"><button class="button_calculator">1</button></div>
                <div class="button_calculator_div"><button class="button_calculator">2</button></div>
                <div class="button_calculator_div"><button class="button_calculator">3</button></div>
                <div class="button_calculator_div"><button class="button_calculator">+</button></div>
                <div class="button_calculator_div"><button class="button_calculator">0</button></div>
                <div class="button_calculator_div"><button class="button_calculator">.</button></div>
                <div class="button_calculator_div"><button class="button_calculator">Del</button></div>
                <div class="button_calculator_div"><button class="button_calculator">=</button></div>
            </div>
        </div>
        <!-- Normal Calculator -->
        <div class="risk_calculator">
            <h1>Code</h1>
            <pre class="line-numbers">
               <code class="language-javascript">
                window.addEventListener('load', () => {
                // Normal Calculator
                const display = document.querySelector('.calculator_result');
                let buttons = Array.from(document.getElementsByClassName("button_calculator"));
                buttons.map(btn => {
                btn.addEventListener('click', (e) => {
                switch (e.target.innerText) {
                case 'AC':
                display.innerText = '';
                break;
                case 'Del':
                display.innerText = display.innerText.slice(0, -1);
                break;
                case '=':
                console.log('Ecuacion sin procesar:' + display.innerText);
                calculatorMath(display.innerText);
                break;
                default:
                display.innerText += e.target.innerText;
                break;
                
                }
                });
                const calculatorMath = (calculation) => {
                if (calculation.includes('+') == true) {
                Calculate('+', calculation);
                } else if (calculation.includes('-') == true) {
                Calculate('-', calculation);
                } else if (calculation.includes('/') == true) {
                Calculate('/', calculation);
                } else if (calculation.includes('*') == true) {
                Calculate('*', calculation);
                } else if (calculation.includes('^') == true) {
                Calculate('^', calculation);
                } else if (calculation.includes('%') == true) {
                Calculate('%', calculation);
                } else {
                return display.innerText = 'no valid';
                }
                
                function Calculate(param, text) {
                let index = text.indexOf(param);
                let num1 = parseFloat(text.slice(0, index));
                let num2 = parseFloat(text.substr(index + 1));
                console.log('num1:' + num1);
                console.log('num2:' + num2);
                console.log('index:' + index);
                console.log(param);
                let maths = {
                '+': (x, y) => { return x + y },
                '-': (x, y) => { return x - y },
                '*': (x, y) => { return x * y },
                '/': (x, y) => { return (x / y) },
                '%': (x, y) => { return (x * y) / 100 },
                '^': (x, y) => { return Math.pow(x, y) }
                };
                return display.innerText = maths[param](num1, num2);
                }
                }
                });
                // Normal Calculator
               </code>
            </pre>
        </div>
    </main>
    <script src="app.js"></script>
    <script src="prism.js"></script>
</body>

</html>